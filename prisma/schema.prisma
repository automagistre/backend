// Prisma 7: URL задаётся в prisma.config.ts (datasource.url), в схеме не указывается.
generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum Unit {
  THING
  PACKAGE
  MILLILITER
  LITER
  GRAM
  KILOGRAM
  MILLIMETER
  METER
}

enum CarEngineType {
  UNKNOWN
  PETROL
  DIESEL
  ETHANOL
  ELECTRIC
  HYBRID
}

enum CarEngineAirIntake {
  UNKNOWN
  ATMOSPHERIC
  TURBO
}

enum CarEngineInjection {
  UNKNOWN
  CLASSIC
  DIRECT
}

enum CarTransmission {
  UNKNOWN
  AUTOMATIC
  ROBOT
  VARIATOR
  MECHANICAL
  AUTOMATIC_5
  AUTOMATIC_7
}

enum CarWheelDrive {
  UNKNOWN
  FRONT_WHEEL_DRIVE
  REAR_WHEEL_DRIVE
  ALL_WHEEL_DRIVE
}

enum OrderStatus {
  DRAFT
  SCHEDULING
  ORDERING
  MATCHING
  TRACKING
  DELIVERY
  NOTIFICATION
  WORKING
  READY
  CLOSED
  SELECTION
  PAYMENT_WAITING
  CANCELLED
}

model Manufacturer {
  id            String    @id @default(uuid()) @db.Uuid
  name          String    @unique(map: "uniq_3d0ae6dc5e237e06") @db.VarChar(64)
  localizedName String?   @map("localized_name") @db.VarChar(255)
  logo          String?   @db.VarChar(25)
  createdAt     DateTime  @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt     DateTime  @updatedAt @map("updated_at") @db.Timestamptz(6)
  createdBy     String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  parts         Part[]
  VehicleModel  Vehicle[]

  @@map("manufacturer")
}

model Part {
  id                       String                     @id @default(uuid()) @db.Uuid
  manufacturer             Manufacturer               @relation(fields: [manufacturerId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  manufacturerId           String                     @map("manufacturer_id") @db.Uuid
  name                     String                     @db.VarChar(255)
  number                   String                     @db.VarChar(30)
  universal                Boolean
  unit                     Int                        @default(1) @db.SmallInt
  warehouseId              String?                    @map("warehouse_id") @db.Uuid
  createdAt                DateTime?                  @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy                String?                    @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  PartPrice                PartPrice[]
  PartDiscount             PartDiscount[]
  PartCrossPart            PartCrossPart[]
  Motion                   Motion[]
  PartRequiredAvailability PartRequiredAvailability[]
  OrderItemPart            OrderItemPart[]
  CarRecommendationPart    CarRecommendationPart[]
  IncomePart               IncomePart[]
  PartSupply               PartSupply[]
  McPart                   McPart[]

  @@unique([number, manufacturerId], map: "uniq_490f70c696901f54a23b42d")
  @@map("part")
}

model PartPrice {
  id                String    @id @default(uuid()) @db.Uuid
  part              Part      @relation(fields: [partId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  partId            String    @map("part_id") @db.Uuid
  since             DateTime  @db.Timestamp(0)
  tenantId          String    @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  priceAmount       BigInt?   @map("price_amount")
  priceCurrencyCode String?   @default("RUB") @map("price_currency_code") @db.VarChar(3)
  createdAt         DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy         String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([partId], map: "idx_59bb753a4ce34bec")
  @@map("part_price")
}

model Person {
  id                             String                   @id @default(uuid()) @db.Uuid
  firstname                      String?                  @db.VarChar(32)
  lastname                       String?                  @db.VarChar(255)
  telephone                      String?                  @db.VarChar(35)
  officePhone                    String?                  @map("office_phone") @db.VarChar(35)
  email                          String?                  @db.VarChar(255)
  contractor                     Boolean
  seller                         Boolean
  tenantGroupId                  String                   @default("1ec13d33-3f41-6cf0-b012-02420a000f18") @map("tenant_group_id") @db.Uuid
  createdAt                      DateTime?                @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy                      String?                  @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  balance                        Decimal                  @default(0) @db.Decimal
  customerCalendarEntryOrderInfo CalendarEntryOrderInfo[] @relation("Customer")
  workerCalendarEntryOrderInfo   CalendarEntryOrderInfo[] @relation("Worker")
  Employee                       Employee[]
  CustomerOrder                  Order[]                  @relation("CustomerOrder")

  @@unique([telephone, tenantGroupId], map: "uniq_34dcd176450ff010dff2bbb0")
  @@map("person")
}

model Vehicle {
  id             String       @id @default(uuid()) @db.Uuid
  manufacturerId String       @map("manufacturer_id") @db.Uuid
  manufacturer   Manufacturer @relation(fields: [manufacturerId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  name           String       @db.VarChar(255)
  localizedName  String?      @map("localized_name") @db.VarChar(255)
  caseName       String?      @map("case_name") @db.VarChar(255)
  yearFrom       Int?         @map("year_from") @db.SmallInt
  yearTill       Int?         @map("year_till") @db.SmallInt
  createdAt      DateTime?    @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy      String?      @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  Car            Car[]
  McEquipment    McEquipment[]

  @@unique([manufacturerId, name, caseName], map: "uniq_b53af235a23b42d5e237e06df3ba4b5")
  @@map("vehicle_model")
}

model Car {
  id                       String                   @id @default(uuid()) @db.Uuid
  vehicleId                String?                  @map("vehicle_id") @db.Uuid
  vehicle                  Vehicle?                 @relation(fields: [vehicleId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  identifier               String?                  @db.VarChar(17)
  year                     Int?
  caseType                 Int                      @default(1) @map("case_type") @db.SmallInt
  description              String?
  mileage                  Int
  gosnomer                 String?                  @db.VarChar(255)
  tenantGroupId            String                   @default("1ec13d33-3f41-6cf0-b012-02420a000f18") @map("tenant_group_id") @db.Uuid
  equipmentTransmission    Int                      @default(0) @map("equipment_transmission") @db.SmallInt
  equipmentWheelDrive      Int                      @default(0) @map("equipment_wheel_drive") @db.SmallInt
  equipmentEngineName      String?                  @map("equipment_engine_name") @db.VarChar(255)
  equipmentEngineType      Int                      @default(0) @map("equipment_engine_type") @db.SmallInt
  equipmentEngineAirIntake Int                      @default(0) @map("equipment_engine_air_intake") @db.SmallInt
  equipmentEngineInjection Int                      @default(0) @map("equipment_engine_injection") @db.SmallInt
  equipmentEngineCapacity  String                   @default("0.6") @map("equipment_engine_capacity") @db.VarChar(255)
  createdAt                DateTime?                @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy                String?                  @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  CalendarEntryOrderInfo   CalendarEntryOrderInfo[]
  Order                    Order[]
  CarRecommendation        CarRecommendation[]

  @@unique([identifier, tenantGroupId], map: "uniq_773de69d772e836adff2bbb0")
  @@map("car")
}

model CarRecommendation {
  id                String                  @id @default(uuid()) @db.Uuid
  carId             String?                 @map("car_id") @db.Uuid
  car               Car?                    @relation(fields: [carId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  service           String                  @db.VarChar(255)
  workerId          String                  @map("worker_id") @db.Uuid
  expiredAt         DateTime?               @map("expired_at") @db.Timestamp(0)
  realization       String?                 @db.Uuid
  tenantGroupId     String                  @default("1ec13d33-3f41-6cf0-b012-02420a000f18") @map("tenant_group_id") @db.Uuid
  priceAmount       BigInt?                 @map("price_amount")
  priceCurrencyCode String?                 @map("price_currency_code") @db.VarChar(3)
  createdAt         DateTime?               @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy         String?                 @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  parts             CarRecommendationPart[]

  @@index([carId], map: "idx_8e4baaf2c3c6f69f")
  @@map("car_recommendation")
}

model CarRecommendationPart {
  id                String            @id @default(uuid()) @db.Uuid
  recommendationId  String            @map("recommendation_id") @db.Uuid
  recommendation    CarRecommendation @relation(fields: [recommendationId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  partId            String            @map("part_id") @db.Uuid
  part              Part              @relation(fields: [partId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  quantity          Int
  tenantGroupId     String            @default("1ec13d33-3f41-6cf0-b012-02420a000f18") @map("tenant_group_id") @db.Uuid
  priceAmount       BigInt?           @map("price_amount")
  priceCurrencyCode String?           @map("price_currency_code") @db.VarChar(3)
  createdAt         DateTime?         @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy         String?           @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([recommendationId], map: "idx_ddc72d65d173940b")
  @@map("car_recommendation_part")
}

model CalendarEntry {
  id                     String                   @id @default(uuid()) @db.Uuid
  tenantId               String                   @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  createdAt              DateTime?                @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy              String?                  @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  calendarEntryDeletion  CalendarEntryDeletion?
  calendarEntryOrderInfo CalendarEntryOrderInfo[]
  calendarEntrySchedule  CalendarEntrySchedule[]
  CalendarEntryOrder     CalendarEntryOrder[]

  @@map("calendar_entry")
}

model CalendarEntryDeletion {
  id            String         @id @default(uuid()) @db.Uuid
  entryId       String         @unique(map: "uniq_f118663dba364942") @map("entry_id") @db.Uuid
  calendarEntry CalendarEntry? @relation(fields: [entryId], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_f118663dba364942")
  reason        Int            @db.SmallInt
  description   String?        @db.VarChar(255)
  tenantId      String         @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  createdAt     DateTime?      @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy     String?        @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("calendar_entry_deletion")
}

model CalendarEntryOrder {
  id            String         @id @default(uuid()) @db.Uuid
  entryId       String         @map("entry_id") @db.Uuid
  calendarEntry CalendarEntry? @relation(fields: [entryId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  orderId       String         @map("order_id") @db.Uuid
  tenantId      String         @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  createdAt     DateTime?      @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy     String?        @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("calendar_entry_order")
}

model CalendarEntryOrderInfo {
  id            String         @id @default(uuid()) @db.Uuid
  entryId       String?        @map("entry_id") @db.Uuid
  calendarEntry CalendarEntry? @relation(fields: [entryId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  tenantId      String         @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  customerId    String?        @map("customer_id") @db.Uuid
  customer      Person?        @relation("Customer", fields: [customerId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  carId         String?        @map("car_id") @db.Uuid
  car           Car?           @relation(fields: [carId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  description   String?
  workerId      String?        @map("worker_id") @db.Uuid
  worker        Person?        @relation("Worker", fields: [workerId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  createdAt     DateTime?      @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy     String?        @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([entryId], map: "idx_5fbde1c1ba364942")
  @@map("calendar_entry_order_info")
}

model CalendarEntrySchedule {
  id            String         @id @default(uuid()) @db.Uuid
  entryId       String?        @map("entry_id") @db.Uuid
  calendarEntry CalendarEntry? @relation(fields: [entryId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  tenantId      String         @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  date          DateTime       @db.Timestamp(0)
  duration      String         @db.VarChar(255)
  createdAt     DateTime?      @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy     String?        @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([entryId], map: "idx_86fdaee3ba364942")
  @@map("calendar_entry_schedule")
}

model AppealCalculator {
  id        String    @id @default(uuid()) @db.Uuid
  name      String    @db.VarChar(255)
  note      String?   @db.VarChar(255)
  phone     String    @db.VarChar(35)
  date      DateTime? @db.Date
  equipmentId String  @map("equipment_id") @db.Uuid
  mileage   Int
  total     BigInt
  works     Json      @db.Json
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("appeal_calculator")
}

model AppealCall {
  id        String    @id @default(uuid()) @db.Uuid
  phone     String    @db.VarChar(35)
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("appeal_call")
}

model AppealCooperation {
  id        String    @id @default(uuid()) @db.Uuid
  name      String    @db.VarChar(255)
  phone     String    @db.VarChar(35)
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("appeal_cooperation")
}

model AppealQuestion {
  id        String    @id @default(uuid()) @db.Uuid
  name      String    @db.VarChar(255)
  email     String    @db.VarChar(255)
  question  String    @db.Text
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("appeal_question")
}

model AppealSchedule {
  id        String    @id @default(uuid()) @db.Uuid
  name      String    @db.VarChar(255)
  phone     String    @db.VarChar(35)
  date      DateTime  @db.Date
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("appeal_schedule")
}

model AppealStatusRecord {
  id        String    @id @default(uuid()) @db.Uuid
  appealId  String    @map("appeal_id") @db.Uuid
  status    Int       @db.SmallInt
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("appeal_status")
}

model AppealTireFitting {
  id        String    @id @default(uuid()) @db.Uuid
  name      String    @db.VarChar(255)
  phone     String    @db.VarChar(35)
  modelId   String?   @map("model_id") @db.Uuid
  category  Int       @db.SmallInt
  diameter  Int?
  total     BigInt
  works     Json      @db.Json
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("appeal_tire_fitting")
}

// model cron_job {
//   id          Int           @id
//   name        String        @unique(map: "un_name") @db.VarChar(191)
//   command     String        @db.VarChar(1024)
//   schedule    String        @db.VarChar(191)
//   description String        @db.VarChar(191)
//   enabled     Boolean
//   cron_report cron_report[]
// }

// model cron_report {
//   id        Int       @id
//   job_id    Int?
//   run_at    DateTime  @db.Timestamp(0)
//   run_time  Float
//   exit_code Int
//   output    String
//   error     String
//   cron_job  cron_job? @relation(fields: [job_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_b6c6a7f5be04ea9")

//   @@index([job_id], map: "idx_b6c6a7f5be04ea9")
// }

model CustomerTransaction {
  id                 String    @id @default(uuid()) @db.Uuid
  operandId          String    @map("operand_id") @db.Uuid
  source             Int       @db.SmallInt
  sourceId           String    @map("source_id") @db.Uuid
  description        String?
  tenantId           String    @map("tenant_id") @db.Uuid
  amountAmount       BigInt?   @map("amount_amount")
  amountCurrencyCode String?   @map("amount_currency_code") @db.VarChar(3)
  createdAt          DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy          String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([operandId, tenantId])
  @@map("customer_transaction")
}

model Employee {
  id               String           @id @default(uuid()) @db.Uuid
  personId         String           @map("person_id") @db.Uuid
  person           Person           @relation(fields: [personId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  ratio            Int
  hiredAt          DateTime         @map("hired_at") @db.Timestamp(0)
  firedAt          DateTime?        @map("fired_at") @db.Timestamp(0)
  tenantId         String           @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  createdAt        DateTime?        @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy        String?          @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  Order             Order[]
  employeeSalaries  EmployeeSalary[]

  @@unique([personId, firedAt], map: "uniq_person_fired")
  @@map("employee")
}

model EmployeeSalary {
  id                  String              @id @default(uuid()) @db.Uuid
  employeeId          String              @map("employee_id") @db.Uuid
  employee            Employee            @relation(fields: [employeeId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  payday              Int
  amount              BigInt
  tenantId            String              @map("tenant_id") @db.Uuid
  createdAt           DateTime?           @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy           String?             @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  employeeSalaryEnd   EmployeeSalaryEnd?

  @@map("employee_salary")
}

model EmployeeSalaryEnd {
  id             String          @id @default(uuid()) @db.Uuid
  salaryId       String?         @unique(map: "uniq_59455a58b0fdf16e") @map("salary_id") @db.Uuid
  tenantId       String          @map("tenant_id") @db.Uuid
  createdAt      DateTime?       @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy      String?         @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  employeeSalary EmployeeSalary? @relation(fields: [salaryId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_59455a58b0fdf16e")

  @@map("employee_salary_end")
}

model Expense {
  id        String    @id @default(uuid()) @db.Uuid
  name      String    @db.VarChar(255)
  walletId  String?   @map("wallet_id") @db.Uuid
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  wallet    Wallet?   @relation(fields: [walletId], references: [id], onDelete: SetNull, onUpdate: NoAction)
  @@map("expense")
}

// model google_review_token {
//   id         String    @id @default(uuid()) @db.Uuid
//   payload    Json      @db.Json
//   tenant_id  String    @db.Uuid
//   created_at DateTime? @default(now()) @db.Timestamptz(0)
//   created_by String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid
// }

model Income {
  id           String        @id @default(uuid()) @db.Uuid
  supplierId   String        @map("supplier_id") @db.Uuid
  document     String?       @db.VarChar(255)
  oldId        Int?          @map("old_id")
  tenantId     String        @map("tenant_id") @db.Uuid
  createdAt    DateTime?     @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy    String?       @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  incomeAccrue IncomeAccrue?
  incomeParts  IncomePart[]

  @@map("income")
}

model IncomeAccrue {
  id                 String    @id @default(uuid()) @db.Uuid
  incomeId           String?   @unique(map: "uniq_425dfa41640ed2c0") @map("income_id") @db.Uuid
  tenantId           String    @map("tenant_id") @db.Uuid
  amountAmount       BigInt?  @map("amount_amount")
  amountCurrencyCode String?  @map("amount_currency_code") @db.VarChar(3)
  createdAt          DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy          String?  @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  income             Income?  @relation(fields: [incomeId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_425dfa41640ed2c0")

  @@map("income_accrue")
}

model IncomePart {
  id                 String    @id @default(uuid()) @db.Uuid
  incomeId           String?   @map("income_id") @db.Uuid
  partId             String    @map("part_id") @db.Uuid
  part               Part      @relation(fields: [partId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  quantity           Int
  tenantId           String    @map("tenant_id") @db.Uuid
  priceAmount       BigInt?   @map("price_amount")
  priceCurrencyCode  String?   @map("price_currency_code") @db.VarChar(3)
  createdAt          DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy          String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  income             Income?   @relation(fields: [incomeId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_834566e8640ed2c0")

  @@index([incomeId], map: "idx_834566e8640ed2c0")
  @@map("income_part")
}

// model inventorization {
//   id                    String                 @id @default(uuid()) @db.Uuid
//   tenant_id             String                 @db.Uuid
//   created_at            DateTime?              @default(now()) @db.Timestamptz(0)
//   created_by            String?                @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid
//   inventorization_close inventorization_close?
// }

// model inventorization_close {
//   id                 String           @id @default(uuid()) @db.Uuid
//   inventorization_id String?          @unique(map: "uniq_4f6195a04ca655fd") @db.Uuid
//   tenant_id          String           @db.Uuid
//   created_at         DateTime?        @default(now()) @db.Timestamptz(0)
//   created_by         String?          @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid
//   inventorization    inventorization? @relation(fields: [inventorization_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_4f6195a04ca655fd")
// }

// model inventorization_part {
//   inventorization_id String @db.Uuid
//   part_id            String @db.Uuid
//   quantity           Int
//   tenant_id          String @db.Uuid

//   @@id([inventorization_id, part_id])
// }

model McEquipment {
  id                          String    @id @default(uuid()) @db.Uuid
  vehicleId                   String    @map("vehicle_id") @db.Uuid
  vehicle                     Vehicle   @relation(fields: [vehicleId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  period                      Int
  tenantId                    String    @map("tenant_id") @db.Uuid
  equipmentTransmission       Int       @map("equipment_transmission") @db.SmallInt
  equipmentWheelDrive         Int       @map("equipment_wheel_drive") @db.SmallInt
  equipmentEngineName         String?   @map("equipment_engine_name") @db.VarChar(255)
  equipmentEngineType         Int       @map("equipment_engine_type") @db.SmallInt
  equipmentEngineAirIntake    Int       @map("equipment_engine_air_intake") @db.SmallInt
  equipmentEngineInjection   Int       @map("equipment_engine_injection") @db.SmallInt
  equipmentEngineCapacity    String    @map("equipment_engine_capacity") @db.VarChar(255)
  createdAt                   DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy                   String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  lines                       McLine[]

  @@map("mc_equipment")
}

model McLine {
  id           String       @id @default(uuid()) @db.Uuid
  equipmentId  String?      @map("equipment_id") @db.Uuid
  workId       String?      @map("work_id") @db.Uuid
  period       Int
  recommended  Boolean
  position     Int
  tenantId     String       @map("tenant_id") @db.Uuid
  createdAt    DateTime?    @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy    String?      @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  equipment    McEquipment? @relation(fields: [equipmentId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_b37ebc5f517fe9fe")
  work         McWork?      @relation(fields: [workId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_b37ebc5fbb3453db")
  parts        McPart[]

  @@index([equipmentId], map: "idx_b37ebc5f517fe9fe")
  @@index([workId], map: "idx_b37ebc5fbb3453db")
  @@map("mc_line")
}

model McPart {
  id          String   @id @default(uuid()) @db.Uuid
  lineId      String?  @map("line_id") @db.Uuid
  partId      String   @map("part_id") @db.Uuid
  part        Part     @relation(fields: [partId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  quantity    Int
  recommended Boolean
  tenantId    String   @map("tenant_id") @db.Uuid
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy   String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  line        McLine?  @relation(fields: [lineId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_2b65786f4d7b7542")

  @@index([lineId], map: "idx_2b65786f4d7b7542")
  @@map("mc_part")
}

model McWork {
  id                  String    @id @default(uuid()) @db.Uuid
  name                String    @db.VarChar(255)
  description         String?   @db.VarChar(255)
  comment             String?   @db.VarChar(255)
  tenantId            String    @map("tenant_id") @db.Uuid
  priceAmount         BigInt?   @map("price_amount")
  priceCurrencyCode   String?   @map("price_currency_code") @db.VarChar(3)
  createdAt           DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy           String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  lines               McLine[]

  @@map("mc_work")
}

// model migration_versions {
//   version        String    @id @db.VarChar(1024)
//   executed_at    DateTime? @db.Timestamp(0)
//   execution_time Int?
// }

model Motion {
  id          String    @id @default(uuid()) @db.Uuid
  part        Part?     @relation(fields: [partId], references: [id], onDelete: SetNull, onUpdate: NoAction)
  partId      String?   @map("part_id") @db.Uuid
  quantity    Int // может быть положительным или отрицательным
  description String?   @db.Text
  tenantId    String    @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  sourceType  Int       @map("source_type") @db.SmallInt
  sourceId    String    @map("source_id") @db.Uuid
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy   String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([partId], map: "idx_f5fea1e84ce34bec")
  @@index([tenantId, partId])
  @@map("motion")
}

model Note {
  id         String      @id @default(uuid()) @db.Uuid
  subject    String      @db.Uuid
  type       Int         @db.SmallInt
  text       String      @db.Text
  isPublic   Boolean?    @default(false) @map("is_public")
  tenantId   String      @map("tenant_id") @db.Uuid
  createdAt  DateTime?   @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy  String      @map("created_by") @db.Uuid
  noteDelete NoteDelete?

  @@map("note")
}

model NoteDelete {
  id          String    @id @default(uuid()) @db.Uuid
  noteId      String?   @unique(map: "uniq_22c02b5326ed0855") @map("note_id") @db.Uuid
  description String    @default("") @map("description") @db.VarChar(255)
  tenantId    String    @map("tenant_id") @db.Uuid
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy   String    @map("created_by") @db.Uuid
  note        Note?     @relation(fields: [noteId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_22c02b5326ed0855")

  @@map("note_delete")
}

model OrderCancel {
  id         String     @id @default(uuid()) @db.Uuid
  createdAt  DateTime?  @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy  String?    @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  orderClose OrderClose @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_9599d5a7bf396750")

  @@map("order_cancel")
}

model OrderClose {
  id          String       @id @default(uuid()) @db.Uuid
  orderId     String?      @unique(map: "uniq_909ff5398d9f6d38") @map("order_id") @db.Uuid
  tenantId    String       @map("tenant_id") @db.Uuid
  type        String       @db.VarChar(255)
  orderCancel OrderCancel?
  orderDeal   OrderDeal?
  order       Order?       @relation("OrderCloseOrder", fields: [orderId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_909ff5398d9f6d38")

  @@map("order_close")
}

model OrderDeal {
  id           String     @id @default(uuid()) @db.Uuid
  balance      BigInt
  satisfaction Int        @db.SmallInt
  createdAt    DateTime?  @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy    String?    @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  orderClose   OrderClose @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_ae0ffb01bf396750")

  @@map("order_deal")
}

model OrderItem {
  id       String            @id @default(uuid()) @db.Uuid
  order    Order?            @relation(fields: [orderId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  orderId  String?           @map("order_id") @db.Uuid
  parent   OrderItem?        @relation("OrderItemTree", fields: [parentId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  parentId String?           @map("parent_id") @db.Uuid
  type     String            @db.VarChar(255)
  tenantId String            @map("tenant_id") @db.Uuid
  children OrderItem[]       @relation("OrderItemTree")
  group    OrderItemGroup?
  service  OrderItemService?
  part     OrderItemPart?

  @@index([parentId], map: "idx_52ea1f09727aca70")
  @@index([orderId], map: "idx_52ea1f098d9f6d38")
  @@map("order_item")
}

model OrderItemGroup {
  id        String    @id @default(uuid()) @db.Uuid
  orderItem OrderItem @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  name      String    @db.VarChar(255)
  hideParts Boolean   @map("hide_parts")
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("order_item_group")
}

model OrderItemService {
  id                   String    @id @default(uuid()) @db.Uuid
  orderItem            OrderItem @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  service              String    @db.VarChar(255)
  workerId             String?   @map("worker_id") @db.Uuid
  warranty             Boolean
  priceAmount          BigInt?   @map("price_amount")
  priceCurrencyCode    String?   @map("price_currency_code") @db.VarChar(3)
  discountAmount       BigInt?   @map("discount_amount")
  discountCurrencyCode String?   @map("discount_currency_code") @db.VarChar(3)
  createdAt            DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy            String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("order_item_service")
}

model OrderItemPart {
  id                   String        @id @default(uuid()) @db.Uuid
  orderItem            OrderItem     @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  part                 Part          @relation(fields: [partId], references: [id], onDelete: Restrict, onUpdate: NoAction)
  partId               String        @map("part_id") @db.Uuid
  supplier             Organization? @relation(fields: [supplierId], references: [id], onDelete: SetNull, onUpdate: NoAction)
  supplierId           String?       @map("supplier_id") @db.Uuid
  quantity             Int
  warranty             Boolean
  priceAmount          BigInt?       @map("price_amount")
  priceCurrencyCode    String?       @map("price_currency_code") @db.VarChar(3)
  discountAmount       BigInt?       @map("discount_amount")
  discountCurrencyCode String?       @map("discount_currency_code") @db.VarChar(3)
  createdAt            DateTime?     @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy            String?       @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  reservations         Reservation[]

  @@index([partId])
  @@map("order_item_part")
}

model OrderPayment {
  id                 String    @id @default(uuid()) @db.Uuid
  orderId            String    @map("order_id") @db.Uuid
  order              Order     @relation(fields: [orderId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  description        String?   @db.VarChar(255)
  tenantId           String    @map("tenant_id") @db.Uuid
  amountAmount       BigInt?   @map("money_amount")
  amountCurrencyCode String?   @map("money_currency_code") @db.VarChar(3)
  createdAt          DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy          String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([orderId], map: "idx_9b522d468d9f6d38")
  @@map("order_payment")
}

// /// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
// model order_suspend {
//   id         String    @id @default(uuid()) @db.Uuid
//   order_id   String?   @db.Uuid
//   till       DateTime  @db.Timestamp(0)
//   reason     String    @db.VarChar(255)
//   tenant_id  String    @db.Uuid
//   created_at DateTime? @default(now()) @db.Timestamptz(0)
//   created_by String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid
//   orders     orders?   @relation(fields: [order_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_c789f0d18d9f6d38")

//   @@index([order_id], map: "idx_c789f0d18d9f6d38")
// }

// /// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model Order {
  id          String         @id @default(uuid()) @db.Uuid
  number      Int
  status      Int            @default(1) @map("status") @db.SmallInt
  car         Car?           @relation(fields: [carId], references: [id], onDelete: SetNull, onUpdate: NoAction)
  carId       String?        @map("car_id") @db.Uuid
  customer    Person?        @relation("CustomerOrder", fields: [customerId], references: [id], onDelete: SetNull, onUpdate: NoAction)
  customerId  String?        @map("customer_id") @db.Uuid
  worker      Employee?      @relation(fields: [workerId], references: [id], onDelete: SetNull, onUpdate: NoAction)
  workerId    String?        @map("worker_id") @db.Uuid
  mileage     Int?
  description String?
  tenantId    String         @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  createdAt   DateTime?      @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy   String?        @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  items       OrderItem[]
  payments    OrderPayment[]
  close       OrderClose?    @relation("OrderCloseOrder")

  @@unique([number, tenantId], map: "uniq_e52ffdee96901f549033212a")
  @@index([workerId], map: "idx_e52ffdee6b20ba36")
  @@index([carId])
  @@index([customerId])
  @@map("orders")
}

model Organization {
  id                    String          @id @default(uuid()) @db.Uuid
  name                  String          @db.VarChar(255)
  address               String?         @db.VarChar(255)
  telephone             String?         @db.VarChar(35)
  officePhone           String?         @map("office_phone") @db.VarChar(35)
  email                 String?         @db.VarChar(255)
  contractor            Boolean
  seller                Boolean
  tenantGroupId         String          @default("1ec13d33-3f41-6cf0-b012-02420a000f18") @map("tenant_group_id") @db.Uuid
  requisiteBank         String?         @map("requisite_bank") @db.VarChar(255)
  requisiteLegalAddress String?         @map("requisite_legal_address") @db.VarChar(255)
  requisiteOgrn         String?         @map("requisite_ogrn") @db.VarChar(255)
  requisiteInn          String?         @map("requisite_inn") @db.VarChar(255)
  requisiteKpp          String?         @map("requisite_kpp") @db.VarChar(255)
  requisiteRs           String?         @map("requisite_rs") @db.VarChar(255)
  requisiteKs           String?         @map("requisite_ks") @db.VarChar(255)
  requisiteBik          String?         @map("requisite_bik") @db.VarChar(255)
  createdAt             DateTime?       @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy             String?         @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  balance               Decimal         @default(0) @db.Decimal
  OrderItemPart         OrderItemPart[]

  @@map("organization")
}

// /// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments

// model part_case {
//   id         String    @id @default(uuid()) @db.Uuid
//   part_id    String    @db.Uuid
//   vehicle_id String    @db.Uuid
//   created_at DateTime? @default(now()) @db.Timestamptz(0)
//   created_by String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid

//   @@unique([part_id, vehicle_id], map: "uniq_2a0e7894ce34bec545317d1")
// }

model PartCrossPart {
  partCrossId String @map("part_cross_id") @db.Uuid
  partId      String @map("part_id") @db.Uuid
  part        Part   @relation(fields: [partId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([partCrossId, partId])
  @@index([partId], map: "idx_part_cross_part_part_id")
  @@index([partCrossId], map: "idx_part_cross_part_cross_id")
  @@map("part_cross_part")
}

model PartDiscount {
  id                   String    @id @default(uuid()) @db.Uuid
  part                 Part      @relation(fields: [partId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  partId               String    @map("part_id") @db.Uuid
  since                DateTime  @db.Timestamp(0)
  tenantId             String    @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  discountAmount       BigInt?   @map("discount_amount")
  discountCurrencyCode String?   @default("RUB") @map("discount_currency_code") @db.VarChar(3)
  createdAt            DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy            String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([partId], map: "idx_76b231714ce34bec")
  @@map("part_discount")
}

model PartRequiredAvailability {
  id                String    @id @default(uuid()) @db.Uuid
  part              Part      @relation(fields: [partId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  partId            String    @map("part_id") @db.Uuid
  orderFromQuantity Int       @map("order_from_quantity")
  orderUpToQuantity Int       @map("order_up_to_quantity")
  tenantId          String    @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  createdAt         DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy         String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([partId], map: "idx_part_required_availability_part_id")
  @@index([partId, tenantId])
  @@map("part_required_availability")
}

model PartSupply {
  id          String    @id @default(uuid()) @db.Uuid
  partId      String    @map("part_id") @db.Uuid
  part        Part      @relation(fields: [partId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  supplierId  String    @map("supplier_id") @db.Uuid
  quantity    Int
  source      Int       @db.SmallInt
  sourceId    String    @map("source_id") @db.Uuid
  tenantId    String    @map("tenant_id") @db.Uuid
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy   String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([partId])
  @@index([supplierId])
  @@map("part_supply")
}

// model publish {
//   id         String    @id @default(uuid()) @db.Uuid
//   entity_id  String    @db.Uuid
//   published  Boolean
//   tenant_id  String    @db.Uuid
//   created_at DateTime? @default(now()) @db.Timestamptz(0)
//   created_by String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid
// }

model Reservation {
  id              String        @id @default(uuid()) @db.Uuid
  orderItemPartId String        @map("order_item_part_id") @db.Uuid
  quantity        Int
  tenantId        String        @map("tenant_id") @db.Uuid
  createdAt       DateTime?     @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy       String?       @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  orderItemPart   OrderItemPart @relation(fields: [orderItemPartId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_42c84955437ef9d2")

  @@index([orderItemPartId], map: "idx_42c84955437ef9d2")
  @@map("reservation")
}

model Review {
  id        String    @id @default(uuid()) @db.Uuid
  sourceId  String    @map("source_id") @db.VarChar(255)
  source    Int       @db.SmallInt
  author    String    @db.VarChar(255)
  text      String    @db.Text
  rating    Int       @db.SmallInt
  publishAt DateTime  @map("publish_at") @db.Timestamp(0)
  raw       Json?     @db.Json
  tenantId  String    @map("tenant_id") @db.Uuid
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@unique([source, sourceId, tenantId], map: "uniq_794381c65f8a7f73953c1c619033212a")
  @@map("review")
}

// /// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
// model sms {
//   id           String    @id @default(uuid()) @db.Uuid
//   phone_number String    @db.VarChar(35)
//   message      String    @db.VarChar(255)
//   date_send    DateTime? @db.Timestamp(0)
//   tenant_id    String    @db.Uuid
//   created_at   DateTime? @default(now()) @db.Timestamptz(0)
//   created_by   String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid
// }

// model sms_send {
//   id         String    @id @default(uuid()) @db.Uuid
//   sms_id     String    @db.Uuid
//   success    Boolean
//   payload    Json      @db.Json
//   tenant_id  String    @db.Uuid
//   created_at DateTime? @default(now()) @db.Timestamptz(0)
//   created_by String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid
// }

// model sms_status {
//   id         String    @id @default(uuid()) @db.Uuid
//   sms_id     String    @db.Uuid
//   payload    Json      @db.Json
//   created_at DateTime? @default(now()) @db.Timestamptz(0)
//   created_by String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @db.Uuid
// }

// model tenant {
//   id                String              @unique(map: "temporal_unique_idx") @db.Uuid
//   group_id          String              @db.Uuid
//   identifier        String              @unique(map: "uniq_4e59c462772e836a") @db.VarChar(255)
//   name              String              @db.VarChar(255)
//   created_at        DateTime            @default(now()) @db.Timestamptz(6)
//   updated_at        DateTime            @default(now()) @db.Timestamptz(6)
//   tenant_group      tenant_group        @relation(fields: [group_id], references: [id], onUpdate: Restrict)
//   tenant_permission tenant_permission[]

//   @@id([id, group_id])
// }

// model tenant_group {
//   id                      String                    @id @default(uuid()) @db.Uuid
//   identifier              String                    @db.VarChar(255)
//   name                    String
//   created_at              DateTime                  @default(now()) @db.Timestamptz(6)
//   updated_at              DateTime                  @default(now()) @db.Timestamptz(6)
//   tenant                  tenant[]
//   tenant_group_permission tenant_group_permission[]
// }

// model tenant_group_permission {
//   user_id         String       @db.Uuid
//   tenant_group_id String       @db.Uuid
//   created_at      DateTime     @default(now()) @db.Timestamptz(6)
//   updated_at      DateTime     @default(now()) @db.Timestamptz(6)
//   tenant_group    tenant_group @relation(fields: [tenant_group_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

//   @@id([user_id, tenant_group_id])
// }

// model tenant_permission {
//   id         String   @id(map: "user_permission_pkey") @db.Uuid
//   user_id    String   @db.Uuid
//   tenant_id  String   @db.Uuid
//   created_at DateTime @default(now()) @db.Timestamptz(6)
//   updated_at DateTime @default(now()) @db.Timestamptz(6)
//   tenant     tenant   @relation(fields: [tenant_id], references: [id], onUpdate: Restrict)
// }

model Wallet {
  id                         String              @id @default(uuid()) @db.Uuid
  name                       String              @db.VarChar(255)
  useInIncome                Boolean             @map("use_in_income")
  useInOrder                 Boolean             @map("use_in_order")
  showInLayout               Boolean             @map("show_in_layout")
  defaultInManualTransaction Boolean             @map("default_in_manual_transaction")
  tenantId                   String              @map("tenant_id") @db.Uuid
  currencyCode               String?             @map("currency_code") @db.VarChar(3)
  createdAt                  DateTime?           @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy                  String?             @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  balance                    Decimal             @default(0) @db.Decimal
  transactions               WalletTransaction[]
  expenses                   Expense[]

  @@map("wallet")
}

model WalletTransaction {
  id                 String    @id @default(uuid()) @db.Uuid
  walletId           String    @map("wallet_id") @db.Uuid
  wallet             Wallet    @relation(fields: [walletId], references: [id], onDelete: Restrict, onUpdate: Restrict)
  source             Int       @db.SmallInt
  sourceId           String    @map("source_id") @db.Uuid
  description        String?
  tenantId           String    @map("tenant_id") @db.Uuid
  amountAmount       BigInt?   @map("amount_amount")
  amountCurrencyCode String?   @map("amount_currency_code") @db.VarChar(3)
  createdAt          DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy          String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@map("wallet_transaction")
}

model Warehouse {
  id              String            @id @default(uuid()) @db.Uuid
  tenantId        String            @default("1ec13d33-3f41-6e3a-a0cb-02420a000f18") @map("tenant_id") @db.Uuid
  createdAt       DateTime?         @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy       String?           @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid
  names           WarehouseName[]
  codes           WarehouseCode[]
  parentRelations WarehouseParent[] @relation("WarehouseChildren")
  childRelations  WarehouseParent[] @relation("WarehouseParents")

  @@map("warehouse")
}

model WarehouseCode {
  id          String    @id @default(uuid()) @db.Uuid
  warehouse   Warehouse @relation(fields: [warehouseId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  warehouseId String    @map("warehouse_id") @db.Uuid
  code        String    @db.VarChar(255)
  tenantId    String    @map("tenant_id") @db.Uuid
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy   String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@unique([code, tenantId], map: "uniq_warehouse_code_code_tenant")
  @@index([warehouseId], map: "idx_warehouse_code_warehouse_id")
  @@map("warehouse_code")
}

model WarehouseName {
  id          String    @id @default(uuid()) @db.Uuid
  warehouse   Warehouse @relation(fields: [warehouseId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  warehouseId String    @map("warehouse_id") @db.Uuid
  name        String    @db.VarChar(255)
  tenantId    String    @map("tenant_id") @db.Uuid
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy   String?   @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([warehouseId], map: "idx_warehouse_name_warehouse_id")
  @@map("warehouse_name")
}

model WarehouseParent {
  id                String     @id @default(uuid()) @db.Uuid
  warehouse         Warehouse  @relation("WarehouseChildren", fields: [warehouseId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  warehouseId       String     @map("warehouse_id") @db.Uuid
  parentWarehouse   Warehouse? @relation("WarehouseParents", fields: [warehouseParentId], references: [id], onDelete: SetNull, onUpdate: NoAction)
  warehouseParentId String?    @map("warehouse_parent_id") @db.Uuid
  tenantId          String     @map("tenant_id") @db.Uuid
  createdAt         DateTime?  @default(now()) @map("created_at") @db.Timestamptz(0)
  createdBy         String?    @default(dbgenerated("(current_setting('app.user_id'::text))::uuid")) @map("created_by") @db.Uuid

  @@index([warehouseId], map: "idx_warehouse_parent_warehouse_id")
  @@index([warehouseParentId], map: "idx_warehouse_parent_parent_id")
  @@map("warehouse_parent")
}
